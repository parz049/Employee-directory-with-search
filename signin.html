<!DOCTYPE html>
<html ng-app="loginApp">
<head>
  <meta charset="UTF-8" />
  <title>Sign In - Employee Directory</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body ng-controller="LoginController">

  <div class="login-container">
    <h2>Sign In</h2>
    <form ng-submit="login()">
      <input type="text" ng-model="loginData.username" placeholder="Username" required />
      <input type="password" ng-model="loginData.password" placeholder="Password" required />
      <button type="submit">Sign In</button>
    </form>
    <p class="error" ng-if="loginError">{{ loginError }}</p>
  </div>

  <script>
    angular.module('loginApp', [])
      .controller('LoginController', ['$scope', '$http', function($scope, $http) {
        const API = 'http://localhost:3000';

        $scope.loginData = {};
        $scope.loginError = '';

        $scope.login = function() {
          $scope.loginError = '';
          if (!$scope.loginData.username || !$scope.loginData.password) {
            $scope.loginError = 'Please enter username and password.';
            return;
          }

          $http.post(`${API}/login`, $scope.loginData).then(response => {
            if (response.data.success) {
              window.location.href = 'main.html';
            }
          }, error => {
            $scope.loginError = error.data?.message || 'Login failed.';
          });
        };
      }]);
  </script>

</body>
</html>
